import{_ as p,V as o,W as i,X as n,Y as s,Z as t,$ as e,F as c}from"./framework-8edddef6.js";const u={},l=n("h1",{id:"redis",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#redis","aria-hidden":"true"},"#"),s(" Redis")],-1),d=n("p",null,"Redis 是一个开源的使用 ANSI C 语言编写、遵守 BSD 协议、支持网络、可基于内存、分布式、可选持久性的键值对(Key-Value)存储数据库，并提供多种语言的 API，Redis即可以当作一个NoSQL数据库，又可以是当作高速缓存存储，还支持简单的消息队列。",-1),r=n("p",null,"本文仅仅讲解如何使用Go语言驱动来操作Redis数据库，不会对Redis本身做任何讲解。",-1),k={href:"https://redis.uptrace.dev/",target:"_blank",rel:"noopener noreferrer"},m={href:"https://github.com/go-redis/redis",target:"_blank",rel:"noopener noreferrer"},v=e(`<h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h2><p>关于Redis的驱动有很多，本文使用的是<code>github.com/go-redis/redis</code>。</p><br><p>如果你使用的Redis版本号为6</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>go get github.com/go-redis/redis/v8
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如果你使用的Redis版本号为7</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>go get github.com/go-redis/redis/v9
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="快速开始" tabindex="-1"><a class="header-anchor" href="#快速开始" aria-hidden="true">#</a> 快速开始</h2><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token punctuation">(</span>
   <span class="token string">&quot;fmt&quot;</span>
   <span class="token string">&quot;log&quot;</span>
   <span class="token string">&quot;testing&quot;</span>

   <span class="token string">&quot;github.com/go-redis/redis&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">TestQuickStart</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// 创建Redis连接客户端</span>
   redisClient <span class="token operator">:=</span> redis<span class="token punctuation">.</span><span class="token function">NewClient</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>redis<span class="token punctuation">.</span>Options<span class="token punctuation">{</span>
      Addr<span class="token punctuation">:</span>     <span class="token string">&quot;192.168.48.134:6379&quot;</span><span class="token punctuation">,</span>
      Password<span class="token punctuation">:</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">,</span>
      DB<span class="token punctuation">:</span>       <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 使用默认DB</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>

   <span class="token comment">// 设置键值对，0就是永不过期</span>
   redisClient<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;world&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

   <span class="token comment">// 读取值</span>
   result<span class="token punctuation">,</span> err <span class="token operator">:=</span> redisClient<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Result</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token keyword">if</span> err <span class="token operator">==</span> redis<span class="token punctuation">.</span>Nil <span class="token punctuation">{</span>
      fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;ket not exist&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
      log<span class="token punctuation">.</span><span class="token function">Panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="连接配置" tabindex="-1"><a class="header-anchor" href="#连接配置" aria-hidden="true">#</a> 连接配置</h2><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">type</span> Options <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	<span class="token comment">// 网络类型 tcp 或者 unix.</span>
	<span class="token comment">// 默认是 tcp.</span>
	Network <span class="token builtin">string</span>
	<span class="token comment">// redis地址，格式 host:port</span>
	Addr <span class="token builtin">string</span>

    <span class="token comment">// Dialer 创建一个新的网络连接且比Network和Addr有着更高的优先级</span>
	<span class="token comment">// Network and Addr options.</span>
	Dialer <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>net<span class="token punctuation">.</span>Conn<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>
    
	<span class="token comment">// 新建一个redis连接的时候，会回调这个函数</span>
	OnConnect <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token operator">*</span>Conn<span class="token punctuation">)</span> <span class="token builtin">error</span>

	<span class="token comment">// redis密码，redis server没有设置可以为空。</span>
	Password <span class="token builtin">string</span>
	
	<span class="token comment">// redis数据库，序号从0开始，默认是0，可以不用设置</span>
	DB <span class="token builtin">int</span>

	<span class="token comment">// redis操作失败最大重试次数，默认0。</span>
	MaxRetries <span class="token builtin">int</span>
	
	<span class="token comment">// 最小重试时间间隔.</span>
	<span class="token comment">// 默认是 8ms ; -1 表示关闭.</span>
	MinRetryBackoff time<span class="token punctuation">.</span>Duration
	
	<span class="token comment">// 最大重试时间间隔</span>
	<span class="token comment">// 默认是 512ms; -1 表示关闭.</span>
	MaxRetryBackoff time<span class="token punctuation">.</span>Duration

	<span class="token comment">// redis新连接超时时间.</span>
	<span class="token comment">// 默认是 5 秒.</span>
	DialTimeout time<span class="token punctuation">.</span>Duration
	
	<span class="token comment">// socket读取超时时间</span>
	<span class="token comment">// 默认 3 秒.</span>
	ReadTimeout time<span class="token punctuation">.</span>Duration
	
	<span class="token comment">// socket写超时时间</span>
	WriteTimeout time<span class="token punctuation">.</span>Duration

	<span class="token comment">// redis连接池的最大连接数.</span>
	<span class="token comment">// 默认连接池大小等于 cpu个数 * 10</span>
	PoolSize <span class="token builtin">int</span>
	
	<span class="token comment">// redis连接池最小空闲连接数.</span>
	MinIdleConns <span class="token builtin">int</span>
    
	<span class="token comment">// redis连接最大的存活时间，默认不会关闭过时的连接.</span>
	MaxConnAge time<span class="token punctuation">.</span>Duration
	
	<span class="token comment">// 当你从redis连接池获取一个连接之后，连接池最多等待这个拿出去的连接多长时间。</span>
	<span class="token comment">// 默认是等待 ReadTimeout + 1 秒.</span>
	PoolTimeout time<span class="token punctuation">.</span>Duration
    
	<span class="token comment">// redis连接池多久会关闭一个空闲连接.</span>
	<span class="token comment">// 默认是 5 分钟. -1 则表示关闭这个配置项</span>
	IdleTimeout time<span class="token punctuation">.</span>Duration
    
	<span class="token comment">// 多长时间检测一下，空闲连接</span>
	<span class="token comment">// 默认是 1 分钟. -1 表示关闭空闲连接检测</span>
	IdleCheckFrequency time<span class="token punctuation">.</span>Duration

	<span class="token comment">// 只读设置，如果设置为true， 在当前节点实例上，redis只能查询缓存不能更新。</span>
	readOnly <span class="token builtin">bool</span>
    
    <span class="token comment">// TLS配置</span>
	TLSConfig <span class="token operator">*</span>tls<span class="token punctuation">.</span>Config
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="建立连接" tabindex="-1"><a class="header-anchor" href="#建立连接" aria-hidden="true">#</a> 建立连接</h2><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// 创建Redis连接客户端</span>
redisClient <span class="token operator">:=</span> redis<span class="token punctuation">.</span><span class="token function">NewClient</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>redis<span class="token punctuation">.</span>Options<span class="token punctuation">{</span>
    Addr<span class="token punctuation">:</span>     <span class="token string">&quot;192.168.48.134:6379&quot;</span><span class="token punctuation">,</span>
    Password<span class="token punctuation">:</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">,</span>
    DB<span class="token punctuation">:</span>       <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 使用默认DB</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="关闭连接" tabindex="-1"><a class="header-anchor" href="#关闭连接" aria-hidden="true">#</a> 关闭连接</h2><p>驱动内部维护着一个连接池，不需要操作一次就关闭一次连接。</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">defer</span> redisClient<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这个Redis驱动几乎将所有的操作封装好了，Redis命令和方法名一一对应，基本上只要知道Redis命令怎么用，驱动对应的方法都也差不多会了。</p>`,17),g={href:"https://redis.com.cn/commands.html",target:"_blank",rel:"noopener noreferrer"},b=e(`<h2 id="基本操作" tabindex="-1"><a class="header-anchor" href="#基本操作" aria-hidden="true">#</a> 基本操作</h2><h4 id="删除键" tabindex="-1"><a class="header-anchor" href="#删除键" aria-hidden="true">#</a> 删除键</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code>redisClient<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>redisClient<span class="token punctuation">.</span><span class="token function">Del</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Result</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="过期时间" tabindex="-1"><a class="header-anchor" href="#过期时间" aria-hidden="true">#</a> 过期时间</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code>redisClient<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token comment">// 设置过期时间</span>
redisClient<span class="token punctuation">.</span><span class="token function">Expire</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>Second<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>redisClient<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>redisClient<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="取消过期时间" tabindex="-1"><a class="header-anchor" href="#取消过期时间" aria-hidden="true">#</a> 取消过期时间</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code>redisClient<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment">// 取消过期时间</span>
redisClient<span class="token punctuation">.</span><span class="token function">Persist</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>redisClient<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="查询过期时间" tabindex="-1"><a class="header-anchor" href="#查询过期时间" aria-hidden="true">#</a> 查询过期时间</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>redisClient<span class="token punctuation">.</span><span class="token function">TTL</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>redisClient<span class="token punctuation">.</span><span class="token function">PTTL</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="重命名" tabindex="-1"><a class="header-anchor" href="#重命名" aria-hidden="true">#</a> 重命名</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code>redisClient<span class="token punctuation">.</span><span class="token function">Rename</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;newName&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="查询类型" tabindex="-1"><a class="header-anchor" href="#查询类型" aria-hidden="true">#</a> 查询类型</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code>redisClient<span class="token punctuation">.</span><span class="token function">Type</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="扫描" tabindex="-1"><a class="header-anchor" href="#扫描" aria-hidden="true">#</a> 扫描</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>redisClient<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="字符串" tabindex="-1"><a class="header-anchor" href="#字符串" aria-hidden="true">#</a> 字符串</h2><h4 id="简单存取" tabindex="-1"><a class="header-anchor" href="#简单存取" aria-hidden="true">#</a> 简单存取</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code>redisClient<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">&quot;token&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;abcefghijklmn&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>redisClient<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;token&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="批量存取" tabindex="-1"><a class="header-anchor" href="#批量存取" aria-hidden="true">#</a> 批量存取</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code>redisClient<span class="token punctuation">.</span><span class="token function">MSet</span><span class="token punctuation">(</span><span class="token string">&quot;cookie&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;12345&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;token&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;abcefg&quot;</span><span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>redisClient<span class="token punctuation">.</span><span class="token function">MGet</span><span class="token punctuation">(</span><span class="token string">&quot;cookie&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;token&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="数字增减" tabindex="-1"><a class="header-anchor" href="#数字增减" aria-hidden="true">#</a> 数字增减</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code>redisClient<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token comment">// 自增</span>
redisClient<span class="token punctuation">.</span><span class="token function">Incr</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>redisClient<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 自减</span>
redisClient<span class="token punctuation">.</span><span class="token function">Decr</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>redisClient<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="哈希表" tabindex="-1"><a class="header-anchor" href="#哈希表" aria-hidden="true">#</a> 哈希表</h2><h4 id="读写操作" tabindex="-1"><a class="header-anchor" href="#读写操作" aria-hidden="true">#</a> 读写操作</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// 单个设置</span>
redisClient<span class="token punctuation">.</span><span class="token function">HSet</span><span class="token punctuation">(</span><span class="token string">&quot;map&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 批量设置</span>
redisClient<span class="token punctuation">.</span><span class="token function">HMSet</span><span class="token punctuation">(</span><span class="token string">&quot;map&quot;</span><span class="token punctuation">,</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;e&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;f&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 单个访问</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>redisClient<span class="token punctuation">.</span><span class="token function">HGet</span><span class="token punctuation">(</span><span class="token string">&quot;map&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 批量访问</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>redisClient<span class="token punctuation">.</span><span class="token function">HMGet</span><span class="token punctuation">(</span><span class="token string">&quot;map&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 获取整个map</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>redisClient<span class="token punctuation">.</span><span class="token function">HGetAll</span><span class="token punctuation">(</span><span class="token string">&quot;map&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>输出</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>b
[b &lt;nil&gt;]
map[a:b c:d e:f name:jack]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="删除键-1" tabindex="-1"><a class="header-anchor" href="#删除键-1" aria-hidden="true">#</a> 删除键</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// 删除map的一个字段</span>
redisClient<span class="token punctuation">.</span><span class="token function">HDel</span><span class="token punctuation">(</span><span class="token string">&quot;map&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="判断键是否存在" tabindex="-1"><a class="header-anchor" href="#判断键是否存在" aria-hidden="true">#</a> 判断键是否存在</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// 判断字段是否存在</span>
redisClient<span class="token punctuation">.</span><span class="token function">HExists</span><span class="token punctuation">(</span><span class="token string">&quot;map&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="获取所有的键" tabindex="-1"><a class="header-anchor" href="#获取所有的键" aria-hidden="true">#</a> 获取所有的键</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// 获取所有的map的键</span>
redisClient<span class="token punctuation">.</span><span class="token function">HKeys</span><span class="token punctuation">(</span><span class="token string">&quot;map&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="获取哈希表键长度" tabindex="-1"><a class="header-anchor" href="#获取哈希表键长度" aria-hidden="true">#</a> 获取哈希表键长度</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// 获取map长度</span>
redisClient<span class="token punctuation">.</span><span class="token function">HLen</span><span class="token punctuation">(</span><span class="token string">&quot;map&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="遍历哈希表的键值对" tabindex="-1"><a class="header-anchor" href="#遍历哈希表的键值对" aria-hidden="true">#</a> 遍历哈希表的键值对</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// 遍历map中的键值对</span>
redisClient<span class="token punctuation">.</span><span class="token function">HScan</span><span class="token punctuation">(</span><span class="token string">&quot;map&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="列表" tabindex="-1"><a class="header-anchor" href="#列表" aria-hidden="true">#</a> 列表</h2><h4 id="修改元素" tabindex="-1"><a class="header-anchor" href="#修改元素" aria-hidden="true">#</a> 修改元素</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// 左边添加</span>
redisClient<span class="token punctuation">.</span><span class="token function">LPush</span><span class="token punctuation">(</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;e&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 右边添加</span>
redisClient<span class="token punctuation">.</span><span class="token function">RPush</span><span class="token punctuation">(</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;g&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;i&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 在参考值前面插入值</span>
redisClient<span class="token punctuation">.</span><span class="token function">LInsertBefore</span><span class="token punctuation">(</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;aa&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 在参考值后面插入值</span>
redisClient<span class="token punctuation">.</span><span class="token function">LInsertAfter</span><span class="token punctuation">(</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;gg&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 设置指定下标的元素的值</span>
redisClient<span class="token punctuation">.</span><span class="token function">LSet</span><span class="token punctuation">(</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;head&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="访问长度" tabindex="-1"><a class="header-anchor" href="#访问长度" aria-hidden="true">#</a> 访问长度</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// 访问列表长度</span>
redisClient<span class="token punctuation">.</span><span class="token function">LLen</span><span class="token punctuation">(</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="访问元素" tabindex="-1"><a class="header-anchor" href="#访问元素" aria-hidden="true">#</a> 访问元素</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// 左边弹出元素</span>
redisClient<span class="token punctuation">.</span><span class="token function">LPop</span><span class="token punctuation">(</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 右边弹出元素</span>
redisClient<span class="token punctuation">.</span><span class="token function">RPop</span><span class="token punctuation">(</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 访问指定下标的元素</span>
redisClient<span class="token punctuation">.</span><span class="token function">LIndex</span><span class="token punctuation">(</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token comment">// 访问指定范围内的元素</span>
redisClient<span class="token punctuation">.</span><span class="token function">LRange</span><span class="token punctuation">(</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="删除元素" tabindex="-1"><a class="header-anchor" href="#删除元素" aria-hidden="true">#</a> 删除元素</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// 删除指定元素</span>
redisClient<span class="token punctuation">.</span><span class="token function">LRem</span><span class="token punctuation">(</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 删除指定范围的元素</span>
redisClient<span class="token punctuation">.</span><span class="token function">LTrim</span><span class="token punctuation">(</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token comment">// 保留指定范围的元素</span>
redisClient<span class="token punctuation">.</span><span class="token function">LTrim</span><span class="token punctuation">(</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="集合" tabindex="-1"><a class="header-anchor" href="#集合" aria-hidden="true">#</a> 集合</h2><h4 id="新增元素" tabindex="-1"><a class="header-anchor" href="#新增元素" aria-hidden="true">#</a> 新增元素</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// 往一个集合里面添加元素</span>
redisClient<span class="token punctuation">.</span><span class="token function">SAdd</span><span class="token punctuation">(</span><span class="token string">&quot;set&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span>
redisClient<span class="token punctuation">.</span><span class="token function">SAdd</span><span class="token punctuation">(</span><span class="token string">&quot;set2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;e&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="访问集合元素" tabindex="-1"><a class="header-anchor" href="#访问集合元素" aria-hidden="true">#</a> 访问集合元素</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// 获取集合中的所有成员</span>
redisClient<span class="token punctuation">.</span><span class="token function">SMembers</span><span class="token punctuation">(</span><span class="token string">&quot;set&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 判断一个元素是否属于这个集合</span>
redisClient<span class="token punctuation">.</span><span class="token function">SIsMember</span><span class="token punctuation">(</span><span class="token string">&quot;set&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 随机返回count个元素</span>
redisClient<span class="token punctuation">.</span><span class="token function">SRandMemberN</span><span class="token punctuation">(</span><span class="token string">&quot;set&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token comment">// 获取一个集合的元素个数</span>
redisClient<span class="token punctuation">.</span><span class="token function">SCard</span><span class="token punctuation">(</span><span class="token string">&quot;set&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="集合操作" tabindex="-1"><a class="header-anchor" href="#集合操作" aria-hidden="true">#</a> 集合操作</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// 返回给定集合的差集</span>
redisClient<span class="token punctuation">.</span><span class="token function">SDiff</span><span class="token punctuation">(</span><span class="token string">&quot;set&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;set2&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 将给定集合的差集保存在结果集里，返回结果集的长度</span>
redisClient<span class="token punctuation">.</span><span class="token function">SDiffStore</span><span class="token punctuation">(</span><span class="token string">&quot;store&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;set&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;se2&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 返回给定集合的交集</span>
redisClient<span class="token punctuation">.</span><span class="token function">SInter</span><span class="token punctuation">(</span><span class="token string">&quot;set&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;set2&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 将给定集合的交集保存在结果集里，返回结果集的长度</span>
redisClient<span class="token punctuation">.</span><span class="token function">SInterStore</span><span class="token punctuation">(</span><span class="token string">&quot;store&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;set&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;set2&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 返回给定集合的并集</span>
redisClient<span class="token punctuation">.</span><span class="token function">SUnion</span><span class="token punctuation">(</span><span class="token string">&quot;set&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;set2&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 将给定集合的并集保存在结果集里，返回结果集的长度</span>
redisClient<span class="token punctuation">.</span><span class="token function">SUnionStore</span><span class="token punctuation">(</span><span class="token string">&quot;store&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;set&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;store&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="删除元素-1" tabindex="-1"><a class="header-anchor" href="#删除元素-1" aria-hidden="true">#</a> 删除元素</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// 弹出并删除该元素</span>
redisClient<span class="token punctuation">.</span><span class="token function">SPop</span><span class="token punctuation">(</span><span class="token string">&quot;set&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 弹出并删除N给元素</span>
redisClient<span class="token punctuation">.</span><span class="token function">SPopN</span><span class="token punctuation">(</span><span class="token string">&quot;set&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="移动元素" tabindex="-1"><a class="header-anchor" href="#移动元素" aria-hidden="true">#</a> 移动元素</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// 从源集合移动指定元素刀目标集合</span>
redisClient<span class="token punctuation">.</span><span class="token function">SMove</span><span class="token punctuation">(</span><span class="token string">&quot;set&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;set2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="删除元素-2" tabindex="-1"><a class="header-anchor" href="#删除元素-2" aria-hidden="true">#</a> 删除元素</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// 删除指定元素</span>
redisClient<span class="token punctuation">.</span><span class="token function">SRem</span><span class="token punctuation">(</span><span class="token string">&quot;set&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="遍历" tabindex="-1"><a class="header-anchor" href="#遍历" aria-hidden="true">#</a> 遍历</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// 遍历集合</span>
redisClient<span class="token punctuation">.</span><span class="token function">SScan</span><span class="token punctuation">(</span><span class="token string">&quot;set&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="有序集合" tabindex="-1"><a class="header-anchor" href="#有序集合" aria-hidden="true">#</a> 有序集合</h2><h4 id="加入元素" tabindex="-1"><a class="header-anchor" href="#加入元素" aria-hidden="true">#</a> 加入元素</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// 往有序集合中加入元素</span>
redisClient<span class="token punctuation">.</span><span class="token function">ZAdd</span><span class="token punctuation">(</span><span class="token string">&quot;ss&quot;</span><span class="token punctuation">,</span> redis<span class="token punctuation">.</span>Z<span class="token punctuation">{</span>
   Score<span class="token punctuation">:</span>  <span class="token number">1</span><span class="token punctuation">,</span>
   Member<span class="token punctuation">:</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> redis<span class="token punctuation">.</span>Z<span class="token punctuation">{</span>
   Score<span class="token punctuation">:</span>  <span class="token number">2</span><span class="token punctuation">,</span>
   Member<span class="token punctuation">:</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="元素排名" tabindex="-1"><a class="header-anchor" href="#元素排名" aria-hidden="true">#</a> 元素排名</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// 返回有序集合中该元素的排名，从低到高排列</span>
redisClient<span class="token punctuation">.</span><span class="token function">ZRank</span><span class="token punctuation">(</span><span class="token string">&quot;ss&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 返回有序集合中该元素的排名，从高到低排列</span>
redisClient<span class="token punctuation">.</span><span class="token function">ZRevRank</span><span class="token punctuation">(</span><span class="token string">&quot;ss&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="访问元素-1" tabindex="-1"><a class="header-anchor" href="#访问元素-1" aria-hidden="true">#</a> 访问元素</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// 返回介于min和max之间的成员数量</span>
redisClient<span class="token punctuation">.</span><span class="token function">ZCount</span><span class="token punctuation">(</span><span class="token string">&quot;ss&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// 返回对元素的权值</span>
redisClient<span class="token punctuation">.</span><span class="token function">ZScore</span><span class="token punctuation">(</span><span class="token string">&quot;ss&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// 返回指定区间的元素</span>
redisClient<span class="token punctuation">.</span><span class="token function">ZRange</span><span class="token punctuation">(</span><span class="token string">&quot;ss&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment">// 返回介于min和max之间的所有成员列表</span>
redisClient<span class="token punctuation">.</span><span class="token function">ZRangeByScore</span><span class="token punctuation">(</span><span class="token string">&quot;ss&quot;</span><span class="token punctuation">,</span> redis<span class="token punctuation">.</span>ZRangeBy<span class="token punctuation">{</span>
   Min<span class="token punctuation">:</span>    <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
   Max<span class="token punctuation">:</span>    <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
   Offset<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   Count<span class="token punctuation">:</span>  <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="修改权值" tabindex="-1"><a class="header-anchor" href="#修改权值" aria-hidden="true">#</a> 修改权值</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// 给一个对应的元素增加相应的权值</span>
redisClient<span class="token punctuation">.</span><span class="token function">ZIncr</span><span class="token punctuation">(</span><span class="token string">&quot;ss&quot;</span><span class="token punctuation">,</span> redis<span class="token punctuation">.</span>Z<span class="token punctuation">{</span>
   Score<span class="token punctuation">:</span>  <span class="token number">2</span><span class="token punctuation">,</span>
   Member<span class="token punctuation">:</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="删除元素-3" tabindex="-1"><a class="header-anchor" href="#删除元素-3" aria-hidden="true">#</a> 删除元素</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// 删除指定元素</span>
redisClient<span class="token punctuation">.</span><span class="token function">ZRem</span><span class="token punctuation">(</span><span class="token string">&quot;ss&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 删除指定排名区间的元素</span>
redisClient<span class="token punctuation">.</span><span class="token function">ZRemRangeByRank</span><span class="token punctuation">(</span><span class="token string">&quot;ss&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment">// 删除权值在min和max区间的元素</span>
redisClient<span class="token punctuation">.</span><span class="token function">ZRemRangeByScore</span><span class="token punctuation">(</span><span class="token string">&quot;ss&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="脚本" tabindex="-1"><a class="header-anchor" href="#脚本" aria-hidden="true">#</a> 脚本</h2><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// 加载脚本，返回sha值</span>
redisClient<span class="token punctuation">.</span><span class="token function">ScriptLoad</span><span class="token punctuation">(</span><span class="token string">&quot;return 0&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 根据sha值执行脚本</span>
redisClient<span class="token punctuation">.</span><span class="token function">EvalSha</span><span class="token punctuation">(</span><span class="token string">&quot;sha&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 直接执行脚本</span>
redisClient<span class="token punctuation">.</span><span class="token function">Eval</span><span class="token punctuation">(</span><span class="token string">&quot;return 0&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 清除脚本缓存</span>
redisClient<span class="token punctuation">.</span><span class="token function">ScriptFlush</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 杀死当前正在运行的脚本</span>
redisClient<span class="token punctuation">.</span><span class="token function">ScriptKill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 验证对应哈希值的脚本是否存在</span>
redisClient<span class="token punctuation">.</span><span class="token function">ScriptExists</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="发布订阅" tabindex="-1"><a class="header-anchor" href="#发布订阅" aria-hidden="true">#</a> 发布订阅</h2><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// 发送消息到指定频道</span>
redisClient<span class="token punctuation">.</span><span class="token function">Publish</span><span class="token punctuation">(</span><span class="token string">&quot;channel&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;message&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 订阅指定频道</span>
redisClient<span class="token punctuation">.</span><span class="token function">Subscribe</span><span class="token punctuation">(</span><span class="token string">&quot;channel&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 查看订阅状态</span>
redisClient<span class="token punctuation">.</span><span class="token function">PubSubNumSub</span><span class="token punctuation">(</span><span class="token string">&quot;channel&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,76);function h(q,f){const a=c("ExternalLinkIcon");return o(),i("div",null,[l,d,r,n("p",null,[s("官方文档："),n("a",k,[s("Golang Redis client (uptrace.dev)"),t(a)])]),n("p",null,[s("官方仓库："),n("a",m,[s("go-redis/redis: Type-safe Redis client for Golang (github.com)"),t(a)])]),v,n("p",null,[s("Redis命令："),n("a",g,[s("redis 命令手册"),t(a)])]),b])}const C=p(u,[["render",h],["__file","Redis.html.vue"]]);export{C as default};
